<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Popping Game</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <div class="score-display">
                <span class="score-label">Score:</span>
                <span id="score-value">0</span>
            </div>
            <div class="controls">
                <button id="pause-btn" class="control-btn">Pause</button>
                <div class="speed-controls">
                    <button id="slow-btn" class="speed-btn">Slow</button>
                    <button id="normal-btn" class="speed-btn active">Normal</button>
                    <button id="fast-btn" class="speed-btn">Fast</button>
                </div>
                <button id="pictogram-toggle" class="control-btn">Tokyo2020小人: 关</button>
                <button id="camera-toggle" class="control-btn">摄像头: 关</button>
            </div>
        </div>
        
        <div class="game-area">
            <div class="game-main">
                <canvas id="game-canvas" width="1024" height="768"></canvas>
                <div id="hand-cursor" class="hand-cursor"></div>
                <div id="encouragement-message" class="encouragement-message"></div>
                <div id="pause-overlay" class="pause-overlay hidden">
                    <h2>PAUSED</h2>
                    <p>Click Resume to continue playing</p>
                </div>
            </div>
            
            <div class="pose-panel">
                <div class="pose-panel-header">
                    <h3>Tokyo2020 姿势检测</h3>
                    <div class="pose-controls">
                        <button id="pose-mode-toggle" class="pose-btn">小人模式</button>
                    </div>
                </div>
                <div class="pose-display">
                    <video id="pose-video" class="pose-video" autoplay muted playsinline></video>
                    <canvas id="pose-canvas" class="pose-canvas"></canvas>
                </div>
                <div class="pose-status">
                    <div class="status-item">
                        <span>手势状态: </span>
                        <span id="gesture-status">未检测</span>
                    </div>
                    <div class="status-item">
                        <span>左手: </span>
                        <span id="left-hand-status">❌</span>
                    </div>
                    <div class="status-item">
                        <span>右手: </span>
                        <span id="right-hand-status">❌</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="game-footer">
            <div class="instructions">
                <p>🎯 移动光标戳泡泡！点击"摄像头"按钮启用手势控制</p>
                <div class="status-display" style="display: flex; gap: 20px; justify-content: center; margin: 10px 0;">
                    <div class="status-item">
                        <span>输入方式: </span>
                        <span id="input-mode" style="font-weight: bold; color: #2196F3;">鼠标</span>
                    </div>
                    <div class="status-item">
                        <span>泡泡数: </span>
                        <span id="bubble-count" style="font-weight: bold; color: #4CAF50;">0</span>
                    </div>
                </div>
                <div id="debug-info" class="debug-info" style="font-size: 0.9rem; color: #6C757D; margin-top: 10px;"></div>
            </div>
        </div>
    </div>

    <!-- MediaPipe Pose (Tokyo2020 Style) -->
    <!-- MediaPipe Pose (local, no CDN) -->
  <!-- MediaPipe 本地脚本（相对 src/frontend/index.html） -->
    <script src="./vendor/mediapipe/camera_utils/camera_utils.js"></script>
    <script src="./vendor/mediapipe/control_utils/control_utils.js"></script>
    <script src="./vendor/mediapipe/drawing_utils/drawing_utils.js"></script>
    <script src="./vendor/mediapipe/pose/pose.js"></script>

    <script src="js/audio-notes.js"></script>
    <script src="js/audio-engine.js"></script>
    <script src="js/note-log.js"></script>

    <script src="js/bubble-manager.js"></script>
    <script src="js/pose-detector.js"></script>
    <script src="js/collision-detector.js"></script>
    <script src="js/hand-tracker.js"></script>
    <script src="js/game-engine.js"></script>

  
    <!-- TFJS & Magenta（在仓库根的 vendor 下） -->
    <script src="../../vendor/tf/tf.min.js"></script>
    <script src="../../vendor/magenta/music.js"></script>

    <!-- 入口保持 module -->
    <script type="module" src="./js/main.js"></script>
</body>
</html>