# 音乐参数调整功能说明

## 功能概述

结束界面的音乐参数调整功能允许专家测试和收敛安全的音乐参数区间，用于确保生成的音乐不会造成感官过载。

## 参数维度

### 1. BPM (节奏)
- **安全区间**: 60-80 BPM
- **可调范围**: 40-120 BPM
- **说明**: 保持一拍一个音符的 normal speed，BPM 变化会直接影响输出结构

### 2. Dynamic Contrast (动态对比度)
- **安全区间**: 0-20%
- **可调范围**: 0-50%
- **说明**: 控制音符力度的变化幅度，低对比度更平稳

### 3. Volume (音量)
- **安全区间**: 60-80%
- **可调范围**: 0-100%
- **说明**: 整体音量控制

### 4. Harmony (和声组合)
- **安全选项**: I-V (主和弦-属和弦)
- **其他选项**: I-IV, I-vi, I-IV-V, I-vi-IV-V
- **说明**: 离散选择，I-V 是最简单稳定的和声进行

## 两种模式

### 测试模式
- 用于专家测试不同参数组合的听感效果
- 可以自由调整到安全区间外
- 超出安全区间时会显示警告提示

### 收敛模式
- 用于确定最终的安全参数区间
- 显示当前参数摘要
- 可提交收敛后的参数到数据库（待实现）

## UI 设计

- 滑动条使用渐变背景显示安全区间
  - 淡绿色: 安全区间
  - 淡橙色: 非安全区间
- 和声按钮
  - 灰色: 安全选项 (I-V)
  - 淡橙色: 非安全选项
- 超出安全区间时显示警告消息

## 技术实现

- `music-param-controller.js`: 参数控制逻辑
- `music-params.css`: 样式定义
- `advanced-music-generator.js`: 音乐生成器（支持和声和动态对比度）
